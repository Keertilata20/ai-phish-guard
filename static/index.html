<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Phish Guard</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="container">

    <h1>üõ° AI Phish Guard</h1>
    <p class="subtitle">Zero-shot phishing detection API</p>

    <div class="scan-box">
        <input id="urlInput" placeholder="Paste suspicious link here...">

        <button onclick="scanURL()">SCAN NOW</button>
    </div>

    <div id="loader" class="loader hidden"></div>

    <div id="resultBox" class="result hidden">
        <h2 id="resultText"></h2>

        <div class="risk-bar">
            <div id="riskFill" class="risk-fill"></div>
        </div>

        <p id="riskPercent"></p>
    </div>

</div>

<script>

async function scanURL() {

    let url = document.getElementById("urlInput").value;

    if (!url) return;

    document.getElementById("loader").classList.remove("hidden");
    document.getElementById("resultBox").classList.add("hidden");

    const response = await fetch("/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ url: url })
    });

    const data = await response.json();

    document.getElementById("loader").classList.add("hidden");
    document.getElementById("resultBox").classList.remove("hidden");

    let risk = Math.round(data.risk * 100);

    document.getElementById("riskFill").style.width = risk + "%";
    document.getElementById("riskPercent").innerText = risk + "% risk";

    if(data.prediction === "phishing"){
        document.getElementById("resultText").innerText = "‚ö†Ô∏è PHISHING DETECTED";
        document.getElementById("resultBox").className = "result danger";
    } else {
        document.getElementById("resultText").innerText = "‚úÖ SAFE";
        document.getElementById("resultBox").className = "result safe";
    }

}

</script>

</body>
</html>